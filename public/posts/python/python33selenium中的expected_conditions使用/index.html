<!DOCTYPE HTML>

<html><head>
    <title>LM</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
    <link rel="icon" href="/images/Infinite.png" type="image/x-icon">
    <link rel="stylesheet" href="/assets/css/main.css"/>
</head><body class="is-preload" id="top">
        

        <div id="wrapper">
<header id="header">
    <h1><a href="/" style="font-size: 1.2em">LM' s Note</a></h1>
    <nav class="links">
        <ul>
            <li><a href="/posts" style="font-size: 0.9em"><strong>Posts</strong></a></li>
        </ul>
    </nav>
    <nav class="main">
        <ul>
            <li class="search">
                <a class="fa-search" href="#search">Search</a>
                <form id="search" method="get" action="#">
                    <input type="text" name="query" placeholder="施工中" disabled="disabled"/>
                </form>
            </li>
            <li class="menu">
                <a class="fa-bars" href="#menu">Menu</a>
            </li>
        </ul>
    </nav>
</header>
<section id="menu">
    
    <section>
        <h2>施工中</h2>
    </section>
</section>
<div id="main">
    <header>
            <div class="title">
                <h2 style="font-size:2em"><a href="javascript:void(0)">Python(33)——selenium expected_conditions 的使用</a></h2>
                <p>@LM | 2021-07-30</p>
            </div>
        </header>
        <div class="content">
            <blockquote>
<p>参考原文：<a href="https://www.cnblogs.com/nbkhic/p/4885041.html"> selenium expected conditions 使用实例  @乙醇 </a></p>
</blockquote>
<h2 id="1supportexpected_conditions">1.support.expected_conditions</h2>
<p>Expected Conditions 是 selenium 提供的断言工具，通常使用场景有2种</p>
<ul>
<li>直接在断言中使用</li>
<li>与 WebDriverWait 配合使用，动态等待页面上元素出现或者消失</li>
</ul>
<h2 id="2方法">2.方法</h2>
<table>
<thead>
<tr>
<th>函数名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>title_contains</td>
<td>判断当前页面的 title 是否包含预期字符串</td>
</tr>
<tr>
<td>title_is</td>
<td>判断当前页面的 title 是否精确等于预期</td>
</tr>
<tr>
<td>presence_of_element_located</td>
<td>判断某个元素是否被加到了 DOM 树里，并不代表该元素一定可见</td>
</tr>
<tr>
<td>visibility_of_element_located</td>
<td>判断某个元素是否可见，可见代表元素非隐藏，并且元素的宽和高都不等于 0</td>
</tr>
<tr>
<td>presence_of_all_elements_located</td>
<td>判断是否至少有 1 个元素存在于 DOM 树中</td>
</tr>
<tr>
<td>text_to_be_present_in_element</td>
<td>判断某个元素中的 text 是否包含了预期的字符串</td>
</tr>
<tr>
<td>text_to_be_present_in_element_value</td>
<td>判断某个元素中的 value 属性是否包含了预期的字符串</td>
</tr>
<tr>
<td>frame_to_be_available_and_switch_to_it</td>
<td>判断该 frame 是否可以切换进去，如果可以则返回 True 并切换进去，否则返回 False</td>
</tr>
<tr>
<td>invisibility_of_element_located</td>
<td>判断某个元素中是否不存在于 DOM 树或不可见</td>
</tr>
<tr>
<td>element_to_be_clickable</td>
<td>判断某个元素中是否可见并且是 enable 可操作的</td>
</tr>
<tr>
<td>staleness_of</td>
<td>判断某个元素是否从 DOM 树中移除</td>
</tr>
<tr>
<td>element_to_be_selected</td>
<td>判断某个元素是否被选中了，一般用在下拉列表</td>
</tr>
<tr>
<td>element_located_selection_state_to_be</td>
<td>判断某个元素的选中状态是否符合预期</td>
</tr>
<tr>
<td>alert_is_present</td>
<td>判断页面上是否存在 alert</td>
</tr>
</tbody>
</table>
<h2 id="3示例">3.示例</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dr <span style="color:#f92672">=</span> webdriver<span style="color:#f92672">.</span>Chrome()
url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;https://www.baidu.com&#39;</span>
search_text_field_id <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;kw&#39;</span>
dr<span style="color:#f92672">.</span>get(url)

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ECExample</span>(unittest<span style="color:#f92672">.</span>TestCase):

  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_title_is</span>(self):
    <span style="color:#e6db74">&#39;&#39;&#39; 判断title是否符合预期 &#39;&#39;&#39;</span>
    title_is_baidu <span style="color:#f92672">=</span> EC<span style="color:#f92672">.</span>title_is(<span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;百度一下，你就知道&#39;</span>)
    self<span style="color:#f92672">.</span>assertTrue(title_is_baidu(dr))

  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_titile_contains</span>(self):
    <span style="color:#e6db74">&#39;&#39;&#39; 判断title是否包含预期字符 &#39;&#39;&#39;</span>
    title_should_contains_baidu <span style="color:#f92672">=</span> EC<span style="color:#f92672">.</span>title_contains(<span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;百度&#39;</span>)
    self<span style="color:#f92672">.</span>assertTrue(title_should_contains_baidu(dr))

  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_presence_of_element_located</span>(self):
    <span style="color:#e6db74">&#39;&#39;&#39; 判断element是否出现在dom树 &#39;&#39;&#39;</span>
    locator <span style="color:#f92672">=</span> (By<span style="color:#f92672">.</span>ID, search_text_field_id)
    search_text_field_should_present <span style="color:#f92672">=</span> EC<span style="color:#f92672">.</span>visibility_of_element_located(locator)

    <span style="color:#e6db74">&#39;&#39;&#39; 动态等待10s，如果10s内element加载完成则继续执行下面的代码，否则抛出异常 &#39;&#39;&#39;</span>
    WebDriverWait(dr, <span style="color:#ae81ff">10</span>)<span style="color:#f92672">.</span>until(EC<span style="color:#f92672">.</span>presence_of_element_located(locator))
    WebDriverWait(dr, <span style="color:#ae81ff">10</span>)<span style="color:#f92672">.</span>until(EC<span style="color:#f92672">.</span>visibility_of_element_located(locator))

    self<span style="color:#f92672">.</span>assertTrue(search_text_field_should_present(dr))

  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_visibility_of</span>(self):
    search_text_field <span style="color:#f92672">=</span> dr<span style="color:#f92672">.</span>find_element_by_id(search_text_field_id)
    search_text_field_should_visible <span style="color:#f92672">=</span> EC<span style="color:#f92672">.</span>visibility_of(search_text_field)
    self<span style="color:#f92672">.</span>assertTrue(search_text_field_should_visible(<span style="color:#e6db74">&#39;yes&#39;</span>))

  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_text_to_be_present_in_element</span>(self):
    text_should_present <span style="color:#f92672">=</span> EC<span style="color:#f92672">.</span>text_to_be_present_in_element((By<span style="color:#f92672">.</span>NAME, <span style="color:#e6db74">&#39;tj_trhao123&#39;</span>), <span style="color:#e6db74">&#39;hao123&#39;</span>)
    self<span style="color:#f92672">.</span>assertTrue(text_should_present(dr))
    
  <span style="color:#a6e22e">@classmethod</span>
  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">tearDownClass</span>(kls):
    print <span style="color:#e6db74">&#39;after all test&#39;</span>
    dr<span style="color:#f92672">.</span>quit()
    print <span style="color:#e6db74">&#39;quit dr&#39;</span>

<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;__main__&#39;</span>:
  unittest<span style="color:#f92672">.</span>main()
</code></pre></div>
            <p style="margin-top:1em;"></p>
        </div>
        <footer>
            <p class="post-copyright-license" style="margin-top:1em; margin-bottom:1em">
                <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/"
                                                            rel="noopener" target="_blank"><i
                    class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。
            </p>
        </footer>
    
    <ul class="actions pagination" style="margin-bottom:5px; float:right">
        <li><a href="#top" class="button large">回到顶部</a></li>
        
          <li><a href="https://ac-lm.github.io/posts/python/python32selenium%E4%B8%8B%E6%8B%89%E6%A1%86select%E5%A4%84%E7%90%86/" class="button large previous">上一页</a></li>
        
        
    </ul>
</div>


        </div>
<script src="/assets/js/jquery.min.js"></script>
<script src="/assets/js/browser.min.js"></script>
<script src="/assets/js/breakpoints.min.js"></script>
<script src="/assets/js/util.js"></script>
<script src="/assets/js/main.js"></script></body>
</html>
