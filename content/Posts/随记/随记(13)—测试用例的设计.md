---
title: 随记(13)—测试用例的设计
date: 2020-10-30
author: LM
tags: ["随记"]
---

## 1.什么是测试用例

1. 设计一个情况，软件程序在这种情况下，必须能够正常运行并且达到程序所设计的预期结果。（即把程序可能发生的每种情况列出来）

2. 如果程序在这种情况下不能正常运行，而且这种问题会重复发生，那就表示软件程序测试人员已经测出软件有缺陷，这时候就必须将这个问题标识出来，并且通知软件开发人员。软件开发人员接获通知后，将这个问题修改完成于下一个测试版本内。

3. 软件测试工程师取得新的测试版本后，必须利用同一个用例来测试这个问题，确保该问题已修改完成。


## 2.用例设计方法

### a.等价类

**解释**：依据需求将输入划分为若干个等价类,从等价类中选出一个测试用例,如果这个测试用例测试通过,则认为所代表的整个等价类测试通过,这样就可以通过较少的测试用例达到尽量多的功能覆盖,解决了不能穷举测试的问题

**弊端**：等价类只考虑输入域的分类,没有考虑输入域的组合,需要其他的设计方法和补充 

- 有效等价类:对于程序的规格说明书是合理的,有意义的输入数据构成的集合,利用有效等价类验证程序是否实现了规格说明书中所规定的功能和性能
- 无效等价类:根据需求说明书,不满足需求的集合

```
超市买水果
有效等价类:苹果,香蕉,桃子...
无效等价类:青菜,大米,饮料... 
```

### b.边界值

**解释**：边界值分析法就是对输入或者输出的边界值进行测试的一种黑盒测试方法，通常边界值分析法是作为对等价类划分方法的补充,这种情况下,其测试用例来自等价类的边界 

```
输入框长度为1-11,边界值取值:0,1,11,12
运动员参赛项目为1-3项,边界值取值:0项,1项,3项,4项
查询面页面有999行,每50行为一页,边界值取值:0行,1行,50行,51行,999行 
```

### c.因果图

**解释**：因果图是一种简化了的逻辑图,能直观的表明程序输入条件(原因)和输出动作(结果)之间的相互关系,因果图法是借助图形来设计测试用例的一种系统方法,特别适用于被测试程序具有多种输入条件,程序的输出又依赖于输入条件的各种情况

因果图设计测试用例的步骤:

- 分析所有可能的输入和可能的输出
- 找出输入与输出之间的关系
- 画出因果图
- 把因果图转化成判定表
- 把判定表对应到每一个测试用例 

**案例**：

```
淘宝在双十一退出打折优惠活动,订单已提交,订单金额大于300或有红包,则优惠
```

1.对于这条业务规则,首先通过分析所有可能的输入和可能的输出,可以得到如下结果:

- 输入:订单已提交,订单金额大于300,有红包
- 输出:优惠,不优惠

2.然后进行第二步,找出输入域输出之间的关系,通过分析得出以下对应关系

- 订单已提交,订单金额大于300,则优惠
- 订单已提交,订单金额小于等于300,无红包,不优惠
- 订单已提交,订单金额小于等于300,有红包,优惠
- 订单已提交,有红包,优惠
- 订单未提交,不优惠

3.为了方便画出因果图和判定图,对所有输入和输出编号,编号如下:

- 1:订单已提交
- 2:订单金额大于300
- 3:有红包
- 21:优惠
- 22:不优惠 

4.画因果图，画判定表，得测试用例

### d.正交排列

**解释**：正交法的目的是为了减少用例数量,用尽量少的用例,覆盖输入的两两组合，正交试验设计是研究多因素多水平的一种设计方法,它是根据正交性,由实验因素的全部水平组合中挑选出部分有代表性的点进行实验,通过对这部分实验结果的分析了解全面试验的情况,找出最优的水平组合,正交试验设计是一种基于正交表的,高效率,快速,经济的试验.

```
正交排列需要掌握的基本知识:

因素(Factor):在一项试验中,凡是考虑的变量都称为因素(变量)

水平/位级(Level):在试验范围内,因素被考查的值称为水平(变量的取值)

正交表的构成:
- 行数(Runs):正交表中行的个数,即试验的次数,用N表示
- 因素数(Factors): 正交表中列的个数,用C表示
- 水平数(Levels): 任何单个因素能够取到的值的最大个数,正交表中包含的值为从0到数"水平数-1"或者从1到"水平数",用T表示

正交表的表示形式: L=行数(水平数*因素数) L=N(TC)

正交表的两条性质:
- 每一列中各数字出现的次数都一样多
- 任何两列锁构成的各有序数对出现的次数都一样多
```

正交法设计测试用例的步骤： 

- 有哪些因素（变量）
- 每个因素有哪几个水平（变量的取值）
- 选择一个合适的正交表
- 把变量的值映射到表中
- 把每一行的各因素水平的组合作为一个测试用例
- 加上你认为可疑且没有在表中出现的用例组合 

**案例**：

```
用户注册
```

1.因素：姓名,邮箱,密码,确认密码,验证码

2.水平：填写,不填写

![](https://gitee.com/LM-J/drawingbed/raw/master/img/799.png)

3.计算：表中的因素数=5，表中至每个因素数的水平数=2，行数取最少的一个，即试验次数最少的一个，公式 L=N(TC)=(2-1)*5+1=6(25)  【N试验次数  T水平数  C因素数】

4.生成测试用例

![](https://gitee.com/LM-J/drawingbed/raw/master/img/939.jpg)

### e.场景设计法

**解释**：现在的软件几乎都是用事件触发来控制流程的,事件触发时的情景便形成了场景,而同一事件不同的触发顺序和处理结果就形成事件流,该方法可以比较生动地描绘出事件触发时的情景,有利于测试设计者设计测试用例,使测试用例更容易理解和执行

**案例**：

```
用户注册
```

开始—>用户注册—>用户阅读协议—>是否同意协议—是—>填写信息—>发送验证信息—>激活—>注册成功—>结束

### f.错误猜测法

**解释**：基于经验和直觉，找出程序中你认为会出现的错误,有针对性地设计测试用例,经验可能来自于对某项业务的测试较多,也可以来自售后用户的反馈意见,或者从故障管理库中整理出bug,整理出产品越往哪些地方越容易出现问题,问题越多的地方,潜在的bug越多

**案例**：

```
用户注册
```

1. 校验中特殊字符空格的处理?
2. 密码校验中的大小写？
3. 姓名中的特殊字符？
4. 密码发送是否明文

## 3.用例举例

### Q：一、登录功能测试用例设计

#### 功能测试：

1. 输入正确的账号和密码，点击提交按钮，验证是否能正常登录；

2. 输入错误的账号或错误的密码，登录失败，是否有相应的提示信息；

3. 登录成功后能否跳转到正确的页面；

4. 账号和密码，如果太短或者太长，应该怎么处理，密码太短时是否有提示（密码安全性检测）；

5. 账号和密码中有特殊字符（如空格），和其他非英文的情况，是否做了过滤；

6. 是否可以记住登录成功的账号；

7. 登录失败后，不能记住密码；

8. 账号和密码前后有空格是否正常处理；

9. 密码是否**显示（星号、圆点等）；

10. 验证码文字是否扭曲过度导致辨认难度大，刷新是否正常；

11. 登录页面中的注册、忘记密码链接是否正确跳转；

12. 输入密码的时候，大写键盘开启时是否有提示信息；

13. 不输入任何内容，点击提交按钮，提示信息是否正确（非空校验）；


#### UI测试：

1. 布局是否合理，文字和按钮是否正确排列；

2. 文本输入框和按钮的长度，高度是否符合要求；

3. 界面的设计风格是否与UI的设计风格统一；

4. 界面中的文字是否简洁易懂，没有错别字；


#### 安全性测试：

1. 登录成功后生成的Cookie是否有HttpOnly【如果cookie中设置了HttpOnly属性，那么通过JavaScript脚本将无法读取到cookie信息，这样能有效的防止XSS攻击，窃取cookie内容，增加了cookie的安全性】(降低脚本盗取风险）；

2. 账号和密码是否通过POST并加密的方式，发送给Web服务器；

3. 账号和密码的验证，应该是用服务器端验证，而不能单单是在客户端用JavaScript验证；

4. 账号和密码的输入框，应该屏蔽SQL注入攻击；

5. 账号和密码的输入框，应该禁止输入脚本（防止XSS攻击）；

6. 错误登录的次数限制（防止暴力破解）；

7. 考虑是否支持多用户在同一机器上登录；

8. 考虑一用户在多台机器上是否允许登录；


#### 可用性测试：

1. 是否可以全用键盘操作，是否有快捷键；

2. 输入账号，密码后按回车，是否可以登录；

3. 输入框是否可以以Tab键切换；

4. 高对比度下能否显示正常（视力不好的人使用）；


#### 兼容性测试：

1. 主流的浏览器下能否显示正常（IE，Firefox，Chrome，Safari等）；

2. 不同的平台是否能正常工作，比如Windows，Mac；

3. 移动设备上是否正常工作，比如iPhone，Android；

4. 不同的分辨率下是否显示正常；
